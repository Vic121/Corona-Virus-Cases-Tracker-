"use strict";!function(root,factory){"function"==typeof define&&define.amd?define(factory):"object"==typeof exports?module.exports=factory():root.ResizeSensor=factory()}("undefined"!=typeof window?window:this,(function(){if("undefined"==typeof window)return null;var globalWindow="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),requestAnimationFrame=globalWindow.requestAnimationFrame||globalWindow.mozRequestAnimationFrame||globalWindow.webkitRequestAnimationFrame||function(fn){return globalWindow.setTimeout(fn,20)},cancelAnimationFrame=globalWindow.cancelAnimationFrame||globalWindow.mozCancelAnimationFrame||globalWindow.webkitCancelAnimationFrame||function(timer){globalWindow.clearTimeout(timer)};function forEachElement(elements,callback){var elementsType=Object.prototype.toString.call(elements),isCollectionTyped="[object Array]"===elementsType||"[object NodeList]"===elementsType||"[object HTMLCollection]"===elementsType||"[object Object]"===elementsType||"undefined"!=typeof jQuery&&elements instanceof jQuery||"undefined"!=typeof Elements&&elements instanceof Elements,i=0,j=elements.length;if(isCollectionTyped)for(;i<j;i++)callback(elements[i]);else callback(elements)}function getElementSize(element){if(!element.getBoundingClientRect)return{width:element.offsetWidth,height:element.offsetHeight};var rect=element.getBoundingClientRect();return{width:Math.round(rect.width),height:Math.round(rect.height)}}function setStyle(element,style){Object.keys(style).forEach((function(key){element.style[key]=style[key]}))}var ResizeSensor=function(element,callback){var lastAnimationFrameForInvisibleCheck=0;function EventQueue(){var q=[],i,j;this.add=function(ev){q.push(ev)},this.call=function(sizeInfo){for(i=0,j=q.length;i<j;i++)q[i].call(this,sizeInfo)},this.remove=function(ev){var newQueue=[];for(i=0,j=q.length;i<j;i++)q[i]!==ev&&newQueue.push(q[i]);q=newQueue},this.length=function(){return q.length}}function attachResizeEvent(element,resized){if(element)if(element.resizedAttached)element.resizedAttached.add(resized);else{element.resizedAttached=new EventQueue,element.resizedAttached.add(resized),element.resizeSensor=document.createElement("div"),element.resizeSensor.dir="ltr",element.resizeSensor.className="resize-sensor";var style={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},styleChild={position:"absolute",left:"0px",top:"0px",transition:"0s"};setStyle(element.resizeSensor,style);var expand=document.createElement("div");expand.className="resize-sensor-expand",setStyle(expand,style);var expandChild=document.createElement("div");setStyle(expandChild,styleChild),expand.appendChild(expandChild);var shrink=document.createElement("div");shrink.className="resize-sensor-shrink",setStyle(shrink,style);var shrinkChild=document.createElement("div");setStyle(shrinkChild,styleChild),setStyle(shrinkChild,{width:"200%",height:"200%"}),shrink.appendChild(shrinkChild),element.resizeSensor.appendChild(expand),element.resizeSensor.appendChild(shrink),element.appendChild(element.resizeSensor);var computedStyle=window.getComputedStyle(element),position=computedStyle?computedStyle.getPropertyValue("position"):null;"absolute"!==position&&"relative"!==position&&"fixed"!==position&&"sticky"!==position&&(element.style.position="relative");var dirty=!1,rafId=0,size=getElementSize(element),lastWidth=0,lastHeight=0,initialHiddenCheck=!0;lastAnimationFrameForInvisibleCheck=0;var resetExpandShrink=function(){var width=element.offsetWidth,height=element.offsetHeight;expandChild.style.width=width+10+"px",expandChild.style.height=height+10+"px",expand.scrollLeft=width+10,expand.scrollTop=height+10,shrink.scrollLeft=width+10,shrink.scrollTop=height+10},reset=function(){if(initialHiddenCheck){var invisible;if(0===element.offsetWidth&&0===element.offsetHeight)return void(lastAnimationFrameForInvisibleCheck||(lastAnimationFrameForInvisibleCheck=requestAnimationFrame((function(){lastAnimationFrameForInvisibleCheck=0,reset()}))));initialHiddenCheck=!1}resetExpandShrink()};element.resizeSensor.resetSensor=reset;var onResized=function(){rafId=0,dirty&&(lastWidth=size.width,lastHeight=size.height,element.resizedAttached&&element.resizedAttached.call(size))},onScroll=function(){size=getElementSize(element),(dirty=size.width!==lastWidth||size.height!==lastHeight)&&!rafId&&(rafId=requestAnimationFrame(onResized)),reset()},addEvent=function(el,name,cb){el.attachEvent?el.attachEvent("on"+name,cb):el.addEventListener(name,cb)};addEvent(expand,"scroll",onScroll),addEvent(shrink,"scroll",onScroll),lastAnimationFrameForInvisibleCheck=requestAnimationFrame((function(){lastAnimationFrameForInvisibleCheck=0,reset()}))}}forEachElement(element,(function(elem){attachResizeEvent(elem,callback)})),this.detach=function(ev){lastAnimationFrameForInvisibleCheck||(cancelAnimationFrame(lastAnimationFrameForInvisibleCheck),lastAnimationFrameForInvisibleCheck=0),ResizeSensor.detach(element,ev)},this.reset=function(){element.resizeSensor.resetSensor()}};if(ResizeSensor.reset=function(element){forEachElement(element,(function(elem){elem.resizeSensor.resetSensor()}))},ResizeSensor.detach=function(element,ev){forEachElement(element,(function(elem){elem&&(elem.resizedAttached&&"function"==typeof ev&&(elem.resizedAttached.remove(ev),elem.resizedAttached.length())||elem.resizeSensor&&(elem.contains(elem.resizeSensor)&&elem.removeChild(elem.resizeSensor),delete elem.resizeSensor,delete elem.resizedAttached))}))},"undefined"!=typeof MutationObserver){var observer=new MutationObserver((function(mutations){for(var i in mutations)if(mutations.hasOwnProperty(i))for(var items=mutations[i].addedNodes,j=0;j<items.length;j++)items[j].resizeSensor&&ResizeSensor.reset(items[j])}));document.addEventListener("DOMContentLoaded",(function(event){observer.observe(document.body,{childList:!0,subtree:!0})}))}return ResizeSensor}));